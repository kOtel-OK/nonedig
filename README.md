# CRM для пасажирських перевезень

Додаток створено за допомоги Create React App. Для управляння глобальним станом використовується Redux (Redux toolkit), де стан поділено на «слайси» в яких асинхронна логіка реалізується за допомоги ‘Redux Thunk’. Також активно використовуються react hooks. 
При створенні додатку використовується таке BaaS рішення як Firebase – автентифікація та Firestore, як БД.

## Автентифікація користувача

Зареєструватися та увійти можливо як за допомого email/password так і використовуючи Google, Facebook. Якщо користувач має той самий email у всіх провайдерах, то при кожному вході виконується злиття акаунтів. 
Якщо користувач зареєструвався за допомоги email/password, йому на пошту приходе запит для підтвердження email. Це потрібно для того, щоб акаунт отримав статус «verified» - це вирішує проблему з перезаписом акаунтів з боку Google, Facebook. Користувач зможе увійти в додаток тільки після того, як верифікує пошту.
Якщо у зареєстрованому email роль – «admin», то при вході користувач потрапляє в адмін-панель.

При авторизації через телефон, користувачу буде відправлено код на телефон, пісял вводу коду буде проведено авторизацію та якщо це перший вхід – користувача буде додано у БД (зараз для цієї демо-версії додається тільки телефон, але це легко виправити)

## Редагування користувачів 
Якщо користувач зі статусом ‘admin’ заходить в меню в  ‘Users’ з БД підтягуються всі користувачі за винятком ролі ‘admin’. Всі поля ‘read only’ за винятком поля ‘role’, яке ‘admin’ може змінювати.
При натисканні на поле відкривається діалог з селектом, де можна встановити роль. При підтвердженні, користувач (поле ‘role’) перезаписується в БД. Оновлюємо стан  та перемальовуємо UI.

## Створення поїздки 
Всі поїздки відображаються в «Trips».  Коли користувач натискає кнопку ‘Add trip’ відкривається форма де вносимо відповідні данні, окрім того необхідно вибрати водія (підтягаються з бази користувачі, в яких роль – ‘driver’). Якщо немає жодного користувача з роллю ‘driver’ – створити поїздку неможливо. 
Після того, як поїздка була створена – записуємо її в базу, оновлюємо стан та перемальовуємо UI.


Веб посилання на додаток: [CRM](https://noname-digital-1a2ed.web.app/).


***
### Додаток ще у розробці. Буде додано такий функціонал:
* додавання користувачем з роллю ‘admin’ та ‘dispatcher’ пасажирів у поїздку, зі списку користувачів з роллю ‘passenger’
* запит на необхідні та недостаючи данні для користувачів, які реєструються за допомоги Google, Facebook та номеру телефону.
* редагування користувачами своїх даних на персональної сторінці 
* перегляд доступних поїздок та запит на участь у них від користувача з роллю ‘passenger’ та подальша обробка запиту з боку ‘admin’ та ‘dispatcher’
***



